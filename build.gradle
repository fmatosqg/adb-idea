plugins {
    id "org.jetbrains.intellij" version "0.0.35"
}

apply plugin: 'org.jetbrains.intellij'
apply plugin: 'java'

sourceCompatibility = 1.6

sourceSets {
    main {
        resources {
            exclude 'website/adb_operations_popup.pn'
            exclude 'website/find_actions.png'
        }
    }
}

intellij {
    version 'IC-14.1.5'
    pluginName 'adb_idea'
    plugins 'android'
    updateSinceUntilBuild false
    downloadSources !(System.getenv('CI') ?: 'false')

    publish {
        //username ''
        //pluginId ''

        password System.getenv('PLUGIN_PASSWORD')
        channel System.getenv('PLUGIN_CHANNEL') ?: ''
    }
}

group 'com.developerphil.intellij.plugin.adbidea'

def majorVersion = '1.3.0'
version "${System.getenv('CI') ? "$majorVersion-${System.getenv('TRAVIS_JOB_NUMBER')}" : "$majorVersion"}"

repositories {
    mavenCentral()
}

dependencies {

}
